<template>
<main>
<small class="subtle">Tento formul√°≈ô slou≈æ√≠ jako zamƒõ≈ôovac√≠ list. Data se ukl√°daj√≠ offline. P≈ô√≠padn√© dotazy: Martin Krbec.</small>
<FormHeader />
<Umisteni />


<DynamicSection type="chl" title="Chladiƒçe" />
<DynamicSection type="chl_pris" title="P≈ô√≠slu≈°enstv√≠ chladiƒç≈Ø" />
<DynamicSection type="vh_hlavy" title="V√Ωƒçepn√≠ hlavy (VH) + kryty" />
<DynamicSection type="spojky" title="Spojky" />
<DynamicSection type="plakety" title="Plakety" />
<DynamicSection type="kohouty" title="V√Ωƒçepn√≠ kohouty" />
<DynamicSection type="narazec" title="Nara≈æeƒçe & d√≠ly" />
<DynamicSection type="odkapniky" title="Odkapn√≠ky & ost≈ôik" />
<DynamicSection type="plyn" title="Plyn CO‚ÇÇ / N‚ÇÇ" />
<DynamicSection type="hadice_python" title="Hadice & python" />
<DynamicSection type="sanitace" title="Sanitace & bal√≠ƒçky" />
<DynamicSection type="vh_prisl" title="VH p≈ô√≠slu≈°enstv√≠ (dr≈æ√°ky, mezikru≈æ√≠)" />
<DynamicSection type="drzaky_desky" title="Desky & dr≈æ√°ky" />
<DynamicSection type="izolace" title="Izolace" />
<DynamicSection type="pulty" title="Pulty & miniboxy" />
<DynamicSection type="ostatni" title="Ostatn√≠" />


<div class="button-row">
<button class="primary" @click="save">üíæ Ulo≈æit (JSON + CSV ‚Üí Power Automate)</button>
<button class="ghost" @click="resetAll">üóëÔ∏è Zahodit koncept</button>
</div>
</main>
</template>
<script setup>
import FormHeader from './components/FormHeader.vue'
import Umisteni from './components/Umisteni.vue'
import DynamicSection from './components/DynamicSection.vue'
import { resetAll } from './store/formState'
import { sendToPA } from './utils/exporters'


async function save(){
try{ const res = await sendToPA(); if(res?.ok) { alert('Odesl√°no do Power Automate.'); resetAll() } }
catch(e){ alert('Odesl√°n√≠ selhalo ‚Äì √∫loha byla frontov√°na nebo znovu zkuste. '+(e?.message||e)) }
}
</script>
<style scoped>
main{ padding:1rem; background:#f5f5f5 }
.small{ color:#666 }
.button-row{ display:flex; gap:.8rem; justify-content:center; flex-wrap:wrap; margin:1.2rem 0 }
.primary{ background:#b99742; color:#fff; padding:.55rem .9rem; border-radius:8px; border:none }
.ghost{ background:#f0f0f0; color:#333; padding:.55rem .9rem; border-radius:8px; border:none }
</style>